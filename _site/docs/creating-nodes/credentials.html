<!DOCTYPE html>
<html lang="ja"><head>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Node-RED日本ユーザ会  : Node credentials</title>

	<link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,700,300,100' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
	<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">

    <script src="/jquery/js/jquery-1.9.1.js"></script>
	<link href="/css/simplegrid.css" rel="stylesheet" media="screen">
	<link href="/css/style.css" rel="stylesheet" media="screen">
	<link href="/css/front.css" rel="stylesheet" media="screen">
	<link href="/css/docs.css" rel="stylesheet" media="screen">
	<link href="/css/blog.css" rel="stylesheet" media="screen">
	<link href="/css/syntax.css" rel="stylesheet" media="screen">
    
</head>
<body>

<div class="header">
    <div class="header-content">
        <div class="brand"><a href="/"><img class="logo" src="/node-red.png" /> Node-RED User Group Japan</a></div>
        <ul class="navigation">
            <li ><a href="/">ホーム</a></li>
            <li><a href="https://blog.nodered.org/" target="_blank">ブログ</a></li>
            <li class="current"><a href="/docs/">ドキュメント</a></li>
            <li><a href="https://flows.nodered.org/" target="_blank">flows</a></li>
            <li><a href="https://github.com/node-red/node-red" target="_blank">github</a></li>
        </ul>
        <a href="#" class="menu"><i class="icon-reorder icon-2x"></i></a>
    </div>
</div>

<div class="docs">
  <div class="grid">
    <div class="col-3-12">
    <ul class="toc">
    <li class="toc-expander"><div>V</div></li>
    <li class="tocheader"><span>ドキュメント</span>
        <ul>
            <li ><a href="/docs/">概要</a>
        </ul>
    </li>
    <li class="tocheader"><span>Getting Started</span>
        <ul>
            <li ><a href="/docs/getting-started/installation">インストール</a>
            <li ><a href="/docs/getting-started/running">起動  </a>
            <li ><a href="/docs/getting-started/adding-nodes">Nodeの追加</a>
            <li ><a href="/docs/getting-started/upgrading">アップグレード</a>
            <li ><a href="/docs/getting-started/first-flow">はじめてのFlow</a>
            <li ><a href="/docs/getting-started/second-flow">Flow作成</a>
        </ul>
    </li>
    <li class="tocheader"><span>Node-REDの利用</span>
        <ul>
            <li ><a href="/docs/configuration">設定</a></li>
            <li ><a href="/docs/security">認証</a></li>
            <li ><a href="/docs/node-red-admin">Adminツール</a></li>
            <li ><a href="/docs/writing-functions">Function Nodeの書き方</a></li>
            <li ><a href="/docs/embedding">既存アプリケーションへの組込み</a></li>
        </ul>
    </li>
    <li class="tocheader"><span>プラットフォーム</span>
        <ul>
        <li class="tocsubheader"><span>デバイス</span></li>
            <li ><a href="/docs/hardware/raspberrypi">Raspberry Pi</a>
            <li ><a href="/docs/hardware/beagleboneblack">BeagleBone Black</a>
        <li class="tocsubheader"><span>クラウド</span></li>
            <li ><a href="/docs/platforms/bluemix">IBM Bluemix</a>
            <li ><a href="/docs/platforms/aws">Amazon Web Services</a>
            <li ><a href="/docs/platforms/azure">Microsoft Azure</a>
        <li class="tocsubheader"><span>その他</span></li>
            <li ><a href="/docs/hardware/arduino">Arduino</a>
            <li ><a href="/docs/platforms/docker">Docker</a>
        </ul>
    </li>
    <li class="tocheader"><span>API</span>
        <ul>
            <li><a href="/docs/api/">概要</a>
        </ul>
    </li>
    <li class="tocheader"><span>Nodeの作成</span>
        <ul>
            <li ><a href="/docs/creating-nodes/">概要</a></li>
            <li ><a href="/docs/creating-nodes/first-node">Node作成</a></li>
            <li ><a href="/docs/creating-nodes/node-js">JavaScriptファイル</a>
            <li ><a href="/docs/creating-nodes/node-html">HTMLファイル</a>
            <li ><a href="/docs/creating-nodes/context">コンテキスト</a></li>
            <li ><a href="/docs/creating-nodes/properties">プロパティ</a></li>
            <li ><a href="/docs/creating-nodes/credentials">クレデンシャル</a></li>
            <li ><a href="/docs/creating-nodes/appearance">UI</a></li>
            <li ><a href="/docs/creating-nodes/status">ステータス</a></li>
            <li ><a href="/docs/creating-nodes/config-nodes">設定</a></li>
            <li ><a href="/docs/creating-nodes/packaging">パッケージング</a></li>
            <li ><a href="/docs/creating-nodes/i18n">国際化</a></li>
        </ul>
    </li>
</ul>

<script>
$(function() {
    $(".toc-expander").click(function() {
        if ($("ul.toc").hasClass('open')) {
            $("ul.toc").removeClass('open');
        } else {
            $("ul.toc").addClass('open');
        }
    })
});
//$(function() {
//    $("li.tocheader ul").hide();
//    $("li.tocheader a.active").parent().parent().show();
//    $("li.tocheader>span").click(function(e) {
//        $(this).next().toggle("fast");
//    });
//});
</script>

    </div>
    <div class="col-9-12">
      <div class="docs-content">
        <h1 class="docs-title">Node credentials</h1>
        <p>A node may define a number of properties as <code class="highlighter-rouge">credentials</code>. These are properties
that are stored separately to the main flow file and do not get included when
flows are exported from the editor.</p>

<p>To add credentials to a node, the following steps are taken:</p>

<ol>
  <li>
    <p>Add a new <code class="highlighter-rouge">credentials</code> entry to the node’s definition:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code> credentials: {
     username: {type:"text"},
     password: {type:"password"}
 },
</code></pre>
    </div>

    <p>The entries take a single option - their <code class="highlighter-rouge">type</code> which can be either <code class="highlighter-rouge">text</code> or
<code class="highlighter-rouge">password</code>.</p>
  </li>
  <li>
    <p>Add suitable entries to the edit template for the node</p>

    <div class="highlighter-rouge"><pre class="highlight"><code> &lt;div class="form-row"&gt;
     &lt;label for="node-input-username"&gt;&lt;i class="icon-tag"&gt;&lt;/i&gt; Username&lt;/label&gt;
     &lt;input type="text" id="node-input-username"&gt;
 &lt;/div&gt;
 &lt;div class="form-row"&gt;
     &lt;label for="node-input-password"&gt;&lt;i class="icon-tag"&gt;&lt;/i&gt; Password&lt;/label&gt;
     &lt;input type="password" id="node-input-password"&gt;
 &lt;/div&gt;
</code></pre>
    </div>

    <p>Note that the template uses the same element <code class="highlighter-rouge">id</code> conventions as regular
 node properties.</p>
  </li>
  <li>
    <p>In the node’s <code class="highlighter-rouge">.js</code> file, the call to <code class="highlighter-rouge">RED.nodes.registerType</code> must be updated
to include the credentials:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code> RED.nodes.registerType("my-node",MyNode,{
     credentials: {
         username: {type:"text"},
         password: {type:"password"}
     }
 });
</code></pre>
    </div>
  </li>
</ol>

<h3 id="accessing-credentials">Accessing credentials</h3>

<h4 id="runtime-use-of-credentials">Runtime use of credentials</h4>

<p>Within the runtime, a node can access its credentials using the <code class="highlighter-rouge">credentials</code>
property:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">MyNode</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">RED</span><span class="p">.</span><span class="nx">nodes</span><span class="p">.</span><span class="nx">createNode</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">config</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">username</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">credentials</span><span class="p">.</span><span class="nx">username</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">password</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">credentials</span><span class="p">.</span><span class="nx">password</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h4 id="credentials-within-the-editor">Credentials within the Editor</h4>

<p>Within the editor, a node has restricted access to its credentials. Any that are
of type <code class="highlighter-rouge">text</code> are available under the <code class="highlighter-rouge">credentials</code> property - just as they are
in the runtime. But credentials of type <code class="highlighter-rouge">password</code> are not available. Instead,
a corresponding boolean property called <code class="highlighter-rouge">has_&lt;property-name&gt;</code> is present to
indicate whether the credential has a non-blank value assigned to it.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">oneditprepare</span><span class="err">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// this.credentials.username is set to the appropriate value</span>
    <span class="c1">// this.credentials.password is not set</span>
    <span class="c1">// this.credentials.has_password indicates if the property is present in the runtime</span>
    <span class="p">...</span>
<span class="p">}</span></code></pre></figure>

<h3 id="advanced-credential-use">Advanced credential use</h3>

<p>Whilst the credential system outlined above is sufficient for most cases, in some
circumstances it is necessary to store more values in credentials then just those
that get provided by the user.</p>

<p>For example, for a node to support an OAuth workflow, it must retain server-assigned
tokens that the user never sees. The Twitter node provides a good example of how
this can be achieved.</p>


      </div>
    </div>
  </div>
</div>

<div class="footer">
    <div class="grid">
        <div class="content">
            <a class="link-icon" href="http://github.com/node-red/node-red"><i class="icon-github icon-2x"></i></a>
            <a class="link-icon" href="http://twitter.com/nodered"><i class="icon-twitter icon-2x"></i></a>
            <a class="link-icon" href="https://groups.google.com/forum/#!forum/node-red"><i class="icon-envelope icon-2x"></i></a>
            <a class="link-icon" href="http://blog.nodered.org/rss"><i class="icon-rss icon-2x"></i></a>
            <div class="ets-link"><a href="http://ibm.com/blogs/et">Node-RED is a creation of IBM Emerging Technology</a></div>
            <div class="ets-link"><a href="http://ibm.com/blogs/et"><img class="ets-globe" src="/images/ets-globe.png" /> </a></div>
        </div>
    </div>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43773533-1', 'auto');
  ga('send', 'pageview');

  $(function() {
    $(".menu").click(function(e) {
        var s = $(".navigation").slideToggle('hide');
        e.preventDefault();
    });
  });
</script>
</body>
</html>

